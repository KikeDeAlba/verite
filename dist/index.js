var f=function(){if(!(s>1)){var n,e=!1;while(P!==void 0){var a=P;P=void 0,S++;while(a!==void 0){var g=a.o;if(a.o=void 0,a.f&=-3,!(8&a.f)&&p(a))try{a.c()}catch(y){if(!e)n=y,e=!0}a=g}}if(S=0,s--,e)throw n}else s--};var o=function(n){if(E!==void 0){var e=n.n;if(e===void 0||e.t!==E){if(e={i:0,S:n,p:E.s,n:void 0,t:E,e:void 0,x:void 0,r:e},E.s!==void 0)E.s.n=e;if(E.s=e,n.n=e,32&E.f)n.S(e);return e}else if(e.i===-1){if(e.i=0,e.n!==void 0){if(e.n.p=e.p,e.p!==void 0)e.p.n=e.n;e.p=E.s,e.n=void 0,E.s.n=e,E.s=e}return e}}},Y=function(n){this.v=n,this.i=0,this.n=void 0,this.t=void 0},r=function(n){return new Y(n)},p=function(n){for(var e=n.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1},u=function(n){for(var e=n.s;e!==void 0;e=e.n){var a=e.S.n;if(a!==void 0)e.r=a;if(e.S.n=e,e.i=-1,e.n===void 0){n.s=e;break}}},k=function(n){var e=n.s,a=void 0;while(e!==void 0){var g=e.p;if(e.i===-1){if(e.S.U(e),g!==void 0)g.n=e.n;if(e.n!==void 0)e.n.p=g}else a=e;if(e.S.n=e.r,e.r!==void 0)e.r=void 0;e=g}n.s=a},T=function(n){Y.call(this,void 0),this.x=n,this.s=void 0,this.g=K-1,this.f=4};var q=function(n){var e=n.u;if(n.u=void 0,typeof e=="function"){s++;var a=E;E=void 0;try{e()}catch(g){throw n.f&=-2,n.f|=8,x(n),g}finally{E=a,f()}}},x=function(n){for(var e=n.s;e!==void 0;e=e.n)e.S.U(e);n.x=void 0,n.s=void 0,q(n)},h=function(n){if(E!==this)throw new Error("Out-of-order effect");if(k(this),E=n,this.f&=-2,8&this.f)x(this);f()},l=function(n){this.x=n,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32},C=function(n){var e=new l(n);try{e.c()}catch(a){throw e.d(),a}return e.d.bind(e)},B=Symbol.for("preact-signals"),E=void 0,P=void 0,s=0,S=0,K=0;Y.prototype.brand=B;Y.prototype.h=function(){return!0};Y.prototype.S=function(n){if(this.t!==n&&n.e===void 0){if(n.x=this.t,this.t!==void 0)this.t.e=n;this.t=n}};Y.prototype.U=function(n){if(this.t!==void 0){var{e,x:a}=n;if(e!==void 0)e.x=a,n.e=void 0;if(a!==void 0)a.e=e,n.x=void 0;if(n===this.t)this.t=a}};Y.prototype.subscribe=function(n){var e=this;return C(function(){var a=e.value,g=E;E=void 0;try{n(a)}finally{E=g}})};Y.prototype.valueOf=function(){return this.value};Y.prototype.toString=function(){return this.value+""};Y.prototype.toJSON=function(){return this.value};Y.prototype.peek=function(){var n=E;E=void 0;try{return this.value}finally{E=n}};Object.defineProperty(Y.prototype,"value",{get:function(){var n=o(this);if(n!==void 0)n.i=this.i;return this.v},set:function(n){if(n!==this.v){if(S>100)throw new Error("Cycle detected");this.v=n,this.i++,K++,s++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{f()}}}});(T.prototype=new Y).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32)return!0;if(this.f&=-5,this.g===K)return!0;if(this.g=K,this.f|=1,this.i>0&&!p(this))return this.f&=-2,!0;var n=E;try{u(this),E=this;var e=this.x();if(16&this.f||this.v!==e||this.i===0)this.v=e,this.f&=-17,this.i++}catch(a){this.v=a,this.f|=16,this.i++}return E=n,k(this),this.f&=-2,!0};T.prototype.S=function(n){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}Y.prototype.S.call(this,n)};T.prototype.U=function(n){if(this.t!==void 0){if(Y.prototype.U.call(this,n),this.t===void 0){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}}};T.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var n=this.t;n!==void 0;n=n.x)n.t.N()}};Object.defineProperty(T.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var n=o(this);if(this.h(),n!==void 0)n.i=this.i;if(16&this.f)throw this.v;return this.v}});l.prototype.c=function(){var n=this.S();try{if(8&this.f)return;if(this.x===void 0)return;var e=this.x();if(typeof e=="function")this.u=e}finally{n()}};l.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,q(this),u(this),s++;var n=E;return E=this,h.bind(this,n)};l.prototype.N=function(){if(!(2&this.f))this.f|=2,this.o=P,P=this};l.prototype.d=function(){if(this.f|=8,!(1&this.f))x(this)};class c{signalsBoutique={};createSignal(n,e){return this.signalsBoutique[n]=r(e)}updateSignal(n,e){this.signalsBoutique[n]=r(e)}getSignal(n){if(!this.signalsBoutique[n])throw new Error(`Signal ${String(n)} not found`);return this.signalsBoutique[n]}}class d{coreManager;constructor(n){this.coreManager=new c;for(let e in n)this.coreManager.createSignal(e,n[e])}createSignal(n,e){if(this.coreManager.getSignal(n))throw new Error(`Signal ${String(n)} already exists`);this.coreManager.createSignal(n,e)}updateSignal(n,e){this.coreManager.updateSignal(n,e)}getSignal(n){return this.coreManager.getSignal(n)}}function M(n){const e=new d(n);return{updateSignal:(a,g)=>e.updateSignal(a,g),getSignal:(a)=>e.getSignal(a)}}var I=M;export{I as default,M as createBoutique};
